<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Description de l’interface graphique d’une fonction &mdash; MediPy v1.0 documentation</title>
    <link rel="stylesheet" href="../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/translations.js"></script>
    <link rel="top" title="MediPy v1.0 documentation" href="../index.html" />
    <link rel="up" title="Guide du programmeur" href="index.html" />
    <link rel="next" title="Lecture DICOM" href="dicom.html" />
    <link rel="prev" title="Menu" href="menu.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="dicom.html" title="Lecture DICOM"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="menu.html" title="Menu"
             accesskey="P">précédent</a> |</li>
        <li><a href="../index.html">MediPy v1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Guide du programmeur</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table des matières</a></h3>
            <ul>
<li><a class="reference external" href="#">Description de l&#8217;interface graphique d&#8217;une fonction</a><ul>
<li><a class="reference external" href="#syntaxe">Syntaxe</a><ul>
<li><a class="reference external" href="#exemples">Exemples</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            <h4>Sujet précédent</h4>
            <p class="topless"><a href="menu.html"
                                  title="Chapitre précédent">Menu</a></p>
            <h4>Sujet suivant</h4>
            <p class="topless"><a href="dicom.html"
                                  title="Chapitre suivant">Lecture DICOM</a></p>
          <div id="searchbox" style="display: none">
            <h3>Recherche rapide</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="description-de-l-interface-graphique-d-une-fonction">
<h1>Description de l&#8217;interface graphique d&#8217;une fonction<a class="headerlink" href="#description-de-l-interface-graphique-d-une-fonction" title="Lien permanent vers ce titre">¶</a></h1>
<p>Les fonctions présentes dans le menu de MediPy vont avoir une interface
graphique associée. L&#8217;ensemble des boîtes de dialogue de Medimax 3 (créees par
les macros GET_INT, GET_FLOAT, GET_QCM, ...) sont ici remplacées par une unique
interface graphique.</p>
<p>Cette interface est décrite dans la docstring des fonctions python, selon la
syntaxe précisée ci-dessous. Pour une fonction de seuillage prenant comme
paramètres une image d&#8217;entrée, les bornes du seuillage et une image de sortie,
on obtiendra l&#8217;interface suivante :</p>
<img alt="../_images/threshold2_gui.png" src="../_images/threshold2_gui.png" />
<div class="section" id="syntaxe">
<h2>Syntaxe<a class="headerlink" href="#syntaxe" title="Lien permanent vers ce titre">¶</a></h2>
<p>La syntaxe à utiliser dans la docstring de la fonction une syntax XML simple.
L&#8217;interface graphique est contenue dans un élément <tt class="docutils literal"><span class="pre">gui</span></tt>, et chaque élément
de l&#8217;interface est décrit par un élément <tt class="docutils literal"><span class="pre">item</span></tt> avec les attributs suivants</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">name</span></tt> : nom du paramètre correspondant de la fonction</li>
<li><tt class="docutils literal"><span class="pre">type</span></tt> : type du contrôle relié à ce paramètre</li>
<li><tt class="docutils literal"><span class="pre">initializer</span></tt> (optionnel) : paramètre d&#8217;initialisation du contrôle</li>
<li><tt class="docutils literal"><span class="pre">role</span></tt> (optionnel) : rôle du paramètre (vide, <tt class="docutils literal"><span class="pre">output</span></tt> ou <tt class="docutils literal"><span class="pre">return</span></tt>)</li>
<li><tt class="docutils literal"><span class="pre">label</span></tt> : label associé</li>
<li><tt class="docutils literal"><span class="pre">tooltip</span></tt> (optionnel) : tooltip associé</li>
</ul>
<p>L&#8217;attribut <tt class="docutils literal"><span class="pre">role</span></tt> sera absent si le paramètre concerné n&#8217;est pas modifié par
la fonction. Il vaudra <tt class="docutils literal"><span class="pre">output</span></tt> s&#8217;il est modifié par la fonction (i.e. c&#8217;est
un paramètre de sortie) ; il vaudra enfin <tt class="docutils literal"><span class="pre">return</span></tt> s&#8217;il s&#8217;agit d&#8217;une des
valeurs de retour de la fonction.</p>
<div class="section" id="exemples">
<h3>Exemples<a class="headerlink" href="#exemples" title="Lien permanent vers ce titre">¶</a></h3>
<p>Des exemples valant mieux qu&#8217;un long discours, voici l&#8217;exemple d&#8217;une fonction de
seuillage :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">binary_threshold</span><span class="p">(</span><span class="nb">input</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">min</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">inside</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">outside</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Return a binarized version of the input image.</span>

<span class="sd">        &lt;gui&gt;</span>
<span class="sd">            &lt;item name=&quot;input&quot; type=&quot;Image&quot; label=&quot;Image&quot;/&gt;</span>
<span class="sd">            &lt;item name=&quot;min&quot; type=&quot;Float&quot; label=&quot;Minimum value&quot;</span>
<span class="sd">                tooltip=&quot;Minimum value in threshold (included)&quot;/&gt;</span>
<span class="sd">            &lt;item name=&quot;max&quot; type=&quot;Float&quot; label=&quot;Maximum value&quot;</span>
<span class="sd">                tooltip=&quot;Maximum value in threshold (included)&quot;/&gt;</span>
<span class="sd">            &lt;item name=&quot;inside&quot; type=&quot;Float&quot; initializer=&quot;1&quot; label=&quot;Inside value&quot;</span>
<span class="sd">                tooltip=&quot;Value taken by pixels inside the image&quot;/&gt;</span>
<span class="sd">            &lt;item name=&quot;outside&quot; type=&quot;Float&quot; initializer=&quot;0&quot; label=&quot;Outside value&quot;</span>
<span class="sd">                tooltip=&quot;Value taken by pixels outside the image&quot;/&gt;</span>
<span class="sd">            &lt;item name=&quot;output&quot; type=&quot;Image&quot; initializer=&quot;output=True&quot;</span>
<span class="sd">                role=&quot;return&quot; label=&quot;Output image&quot;/&gt;</span>
<span class="sd">        &lt;/gui&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">pass</span>
</pre></div>
</div>
<p>Le champ <tt class="docutils literal"><span class="pre">input</span></tt> crée un contrôle de type <tt class="docutils literal"><span class="pre">Image</span></tt>, qui va permettre de
choisir entre plusieurs images grâce à des radio-buttons. Les champs <tt class="docutils literal"><span class="pre">min</span></tt> et
<tt class="docutils literal"><span class="pre">max</span></tt> ont une syntaxe similaire, mais ajoutent un tooltip. L&#8217;interface générée
est la suivante :</p>
<img alt="../_images/threshold2_gui.png" src="../_images/threshold2_gui.png" />
<p>La fonction suivante montre l&#8217;utilisation du paramètre d&#8217;initialisation du
contrôle :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">erode</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">erode_value</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot; Binary dilation of an image using a name of a structuring element and a</span>
<span class="sd">        radius, or a structuring element.</span>

<span class="sd">        &lt;gui&gt;</span>
<span class="sd">            &lt;item name=&quot;input&quot; type=&quot;Image&quot; label=&quot;Input&quot;/&gt;</span>
<span class="sd">            &lt;item name=&quot;erode_value&quot; type=&quot;Float&quot; initializer=&quot;1&quot; label=&quot;Erode value&quot;/&gt;</span>
<span class="sd">            &lt;item name=&quot;shape&quot; type=&quot;Enum&quot; initializer=&quot;(&#39;ball&#39;, &#39;box&#39;,&#39;cross&#39;)&quot;</span>
<span class="sd">                label=&quot;Shape&quot;/&gt;</span>
<span class="sd">            &lt;item name=&quot;radius&quot; type=&quot;Int&quot; initializer=&quot;1&quot; label=&quot;Radius&quot;/&gt;</span>
<span class="sd">            &lt;item name=&quot;output&quot; type=&quot;Image&quot; initializer=&quot;output=True&quot; role=&quot;return&quot;</span>
<span class="sd">                label=&quot;Output&quot;/&gt;</span>
<span class="sd">        &lt;/gui&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">pass</span>
</pre></div>
</div>
<p>Le paramètre d&#8217;initialisation de <tt class="docutils literal"><span class="pre">radius</span></tt> est optionnel : un contrôle de type
<tt class="docutils literal"><span class="pre">int</span></tt> peut être initialisé sans paramètre, mais on souhaite un élément
structurant de taille au moins 1. Le paramètre d&#8217;initialisation de <tt class="docutils literal"><span class="pre">shape</span></tt> est en
revanche obligatoire : on ne peut pas initialiser une liste de choix sans lui
donner la liste des valeurs qu&#8217;elle peut prendre. L&#8217;interface générée par cette
docstring est la suivante :</p>
<img alt="../_images/binary_erosion.png" src="../_images/binary_erosion.png" />
<p>On peut également spécifier un intervalle pour les valeurs prises pour un
contrôle de type <tt class="docutils literal"><span class="pre">Int</span></tt> grâce au paramètre <tt class="docutils literal"><span class="pre">range</span></tt>. A la création de
l&#8217;interface graphique, si le paramètre <tt class="docutils literal"><span class="pre">range</span></tt> est renseigné, on ajoute alors
une barre de défilement au contrôle. En règle générale, on peut également
choisir de stocker le résultat du traitement dans une nouvelle image en cochant
le bouton <tt class="docutils literal"><span class="pre">new</span></tt> du paramètre <tt class="docutils literal"><span class="pre">Output</span></tt> de l&#8217;interface graphique. On peut
également spécifier l&#8217;intervalle en fonction d&#8217;un des autres éléments de
l&#8217;interface graphique comme dans l&#8217;exemple ci dessous :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">something</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span> <span class="p">:</span>
    <span class="sd">&quot;&quot;&quot; Do something</span>
<span class="sd">        &lt;gui&gt;</span>
<span class="sd">            &lt;item name=&quot;input&quot; type=&quot;Image&quot; label=&quot;Input&quot;/&gt;</span>
<span class="sd">            &lt;item name=&quot;value&quot; type=&quot;Int&quot;</span>
<span class="sd">                initializer=&quot;range = (${input}.data.min(), ${input}.data.max())&quot;</span>
<span class="sd">                label=&quot;Value&quot;/&gt;</span>
<span class="sd">            &lt;item name=&quot;output&quot; type=&quot;Image&quot; role=&quot;output&quot;</span>
<span class="sd">                initializer=&quot;output = True&quot; label=&quot;Output&quot;/&gt;</span>
<span class="sd">        &lt;/gui&gt;</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">pass</span>
</pre></div>
</div>
<img alt="../_images/something.png" src="../_images/something.png" />
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="dicom.html" title="Lecture DICOM"
             >suivant</a> |</li>
        <li class="right" >
          <a href="menu.html" title="Menu"
             >précédent</a> |</li>
        <li><a href="../index.html">MediPy v1.0 documentation</a> &raquo;</li>
          <li><a href="index.html" >Guide du programmeur</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2011, Université de Strasbourg.
      Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.6.
    </div>
  </body>
</html>